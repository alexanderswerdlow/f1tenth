<launch>
	<param name="/use_sim_time" value="true"/>

	<rosparam file="$(find race)/params/car_constants.yaml" command="load"/>

	<node name="hallway_data" pkg="rosbag" type="play" output="screen" args="--clock -s 13 -r 1 $(find race)/bags/hallway.bag"/>

	<include file="$(find race)/launch/tf.launch"/>

	<include file="$(find race)/launch/rf2o_config.launch"/>

	<node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true">
		<rosparam command="load" file="$(find race)/params/ekf_params.yaml"/>
	</node>

	<include file="$(find race)/launch/gmapping.launch"/>

	<node pkg="move_base" type="move_base" respawn="false" name="move_base">
		<rosparam file="$(find race)/params/local_costmap_params.yaml" command="load"/>
		<rosparam file="$(find race)/params/global_costmap_params.yaml" command="load"/>
		<rosparam file="$(find race)/params/move_base_params.yaml" command="load"/>
		<rosparam file="$(find race)/params/teb_local_planner_params.yaml" command="load"/>
		<param name="base_local_planner" value="teb_local_planner/TebLocalPlannerROS"/>
	</node>

	<node name="setpoints" pkg="race" type="setpoint.py" output="screen"/>
	
	<node name="rviz" pkg="rviz" type="rviz" args="-d $(find race)/other/rviz/hypha_stage_sim.rviz"/>

</launch>
