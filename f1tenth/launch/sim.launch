<launch>
	<param name="/use_sim_time" value="true"/>

	<include file="$(find race)/params/tf.launch"/>

	<include file="$(find race)/params/rf2o_config.launch"/>

	<node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true">
		<remap from="cmd_vel" to="car/cmd_vel"/>
		<rosparam command="load" file="$(find race)/params/ekf_params.yaml"/>
	</node>

	<include file="$(find race)/params/gmapping.launch"/>
	<node pkg="move_base" type="move_base" respawn="false" name="move_base_node">

		<param name="planner_frequency" value="2"/>
		<param name="controller_frequency" value="10.0"/>
		<param name="controller_patience" value="3.0"/>
		<param name="oscillation_timeout" value="30.0"/>
		<param name="oscillation_distance" value="0.5"/>
		<rosparam file="$(find race)/params/base_local_planner_params.yaml" command="load" />
		<param name="base_local_planner" value="teb_local_planner/TebLocalPlannerROS" />
	<!--	<rosparam file="$(find race)/params/dwa_local_planner_params.yaml" command="load"/> -->

		<rosparam file="$(find race)/params/local_costmap_params.yaml" command="load"/>
		<rosparam file="$(find race)/params/global_costmap_params.yaml" command="load"/>
	</node>

	<!--<node pkg="local_planner" type="local_planner_node" respawn="true" name="path_planner" output="screen"/>-->

	<node name="rviz" pkg="rviz" type="rviz" args="-d $(find race)/other/rviz/hypha_stage_sim.rviz"/>
	<!--	 <node name="rviz" pkg="rviz" type="rviz" args="-d $(find race)/other/rviz/gmapping.rviz"/> -->

	<!--<node pkg="rqt_graph" type="rqt_graph" name="rqt_graph"/> -->

</launch>
